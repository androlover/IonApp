import{a as N,b as R,f as V}from"./chunk-6A65DSSK.js";import"./chunk-M5744W7D.js";import"./chunk-QUJFQN2Y.js";import"./chunk-CIJFQEFQ.js";import"./chunk-NZHBVG4K.js";import"./chunk-VBSFF4AS.js";import"./chunk-SLX3V7VT.js";import"./chunk-EHZ55EM2.js";import"./chunk-E7LAUSYV.js";import"./chunk-6XMIRX4Z.js";import"./chunk-G7NJUEBO.js";import"./chunk-VAEZJMII.js";import"./chunk-LBMIQEU6.js";import"./chunk-WI5MSH4N.js";import"./chunk-3WIY7GZD.js";import"./chunk-CKP3SGE2.js";import"./chunk-KS4F4WBQ.js";import{A as s,B as c,C as E,G as I,H as M,I as w,M as O,N as T,O as k,P as d,R as L,X as A,Z as z,ca as D,i as y,j as C,p as h,q as S,s as P,w as v,z as m}from"./chunk-YOKCVWIH.js";import"./chunk-FYM6BSZE.js";import"./chunk-VPTTKNUF.js";import"./chunk-7M77WT72.js";import"./chunk-YBYN2MPV.js";import"./chunk-PS2NURIG.js";import"./chunk-FXFZIWDD.js";import"./chunk-SUE5LO2H.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-RW4GY4BD.js";var Q=["scratchCanvas"];function j(r,a){if(r&1){let u=I();s(0,"div")(1,"div",10),d(2,"15% Off on TrehiOrganics"),c(),s(3,"ion-button",11),M("click",function(){y(u);let e=w(2);return C(e.claimNow())}),d(4,"Claim Now"),c()()}}function B(r,a){r&1&&(s(0,"div")(1,"div",12),d(2,"Sorry, Better Luck Next Time"),c()())}function q(r,a){if(r&1&&(s(0,"div",8),v(1,j,5,0,"div",9)(2,B,3,0,"div",9),c()),r&2){let u=w();h(),m("ngIf",u.rewardScenario===1),h(),m("ngIf",u.rewardScenario===2)}}var K=(()=>{let a=class a{constructor(t){this.route=t,this.name="",this.eventtype="",this.selectedCity="",this.isScratched=!1,this.rewardScenario=0,this.couponCode="TREHI15",this.couponUrl="https://trehiorganics.com/discount"}ngOnInit(){this.route.queryParams.subscribe(t=>{this.name=t.name||"",this.eventtype=t.eventtype||"",this.selectedCity=t.city||""})}ngAfterViewInit(){setTimeout(()=>this.setupScratchCard(),300)}claimNow(){navigator.clipboard.writeText(this.couponCode).finally(()=>{window.open(this.couponUrl,"_blank")})}setupScratchCard(){var b;let t=(b=this.scratchCanvas)==null?void 0:b.nativeElement;if(!t)return;let e=t.getContext("2d");if(!e)return;e.fillStyle="#999",e.fillRect(0,0,t.width,t.height),e.globalCompositeOperation="destination-out";let o=!1,l=(i,n)=>{e.beginPath(),e.arc(i,n,20,0,Math.PI*2),e.fill()},f=i=>{let n=t.getBoundingClientRect(),p=i.touches?i.touches[0]:i;return{x:p.clientX-n.left,y:p.clientY-n.top}},g=()=>{let i=e.getImageData(0,0,t.width,t.height),n=i.data.length/4,p=0;for(let x=0;x<i.data.length;x+=4)i.data[x+3]===0&&p++;p/n*100>50&&!this.isScratched&&(this.isScratched=!0,this.rewardScenario=Math.random()<.5?1:2)},_=i=>{if(!o)return;let n=f(i);l(n.x,n.y),g()};t.addEventListener("mousedown",i=>{o=!0;let n=f(i);l(n.x,n.y),g()}),t.addEventListener("mousemove",_),t.addEventListener("mouseup",()=>o=!1),t.addEventListener("mouseleave",()=>o=!1),t.addEventListener("touchstart",i=>{o=!0;let n=f(i);l(n.x,n.y),g()}),t.addEventListener("touchmove",_),t.addEventListener("touchend",()=>o=!1)}};a.\u0275fac=function(e){return new(e||a)(S(D))},a.\u0275cmp=P({type:a,selectors:[["app-about"]],viewQuery:function(e,o){if(e&1&&O(Q,5),e&2){let l;T(l=k())&&(o.scratchCanvas=l.first)}},decls:13,vars:2,consts:[["scratchCanvas",""],[1,"outer-container"],[1,"inner-box"],[1,"scratch-section"],[1,"scratch-text"],[1,"scratch-wrapper"],["width","200","height","200"],["class","scratch-reward-box","style","text-align: center; margin-top: 16px;",4,"ngIf"],[1,"scratch-reward-box",2,"text-align","center","margin-top","16px"],[4,"ngIf"],[1,"reward-text",2,"margin-bottom","12px"],[1,"claim-btn-inside",3,"click"],[1,"reward-text"]],template:function(e,o){e&1&&(s(0,"ion-content",1)(1,"div",2)(2,"p")(3,"strong"),d(4,"Selected College:"),c(),d(5),c(),s(6,"div",3)(7,"p",4),d(8,"Please scratch below to win exciting prizes"),c(),s(9,"div",5),E(10,"canvas",6,0),v(12,q,3,2,"div",7),c()()()()),e&2&&(h(5),L(" ",o.selectedCity,""),h(7),m("ngIf",o.isScratched))},dependencies:[V,N,R,z,A],styles:[".outer-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;text-align:center}.inner-box[_ngcontent-%COMP%]{padding:20px;width:100%;max-width:400px}.scratch-text[_ngcontent-%COMP%]{margin-top:20px;font-weight:700;color:#e0006d}.scratch-wrapper[_ngcontent-%COMP%]{position:relative;width:200px;height:200px;margin:20px auto;background:#fff;border-radius:10px}canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0;border-radius:10px;z-index:1}.scratch-reward-box[_ngcontent-%COMP%]{z-index:2;position:absolute;width:100%;height:100%;color:#e0006d;display:flex;flex-direction:column;justify-content:space-between;padding:20px;pointer-events:none}.claim-btn-inside[_ngcontent-%COMP%]{pointer-events:auto;margin-top:12px;--background: linear-gradient(to right, #bf1c56, #ff416c);color:#fff;font-weight:700;text-transform:capitalize;border-radius:10px;height:40px;font-size:14px}"]});let r=a;return r})();export{K as AboutPage};
